!function(i){function t(t,e){this.options=i.extend({maxWidth:800,minWidth:0,destroyAt:-1},e),this.item=i(t),this.is_init=!1,this.is_destroy=!1,this.load()}t.prototype={init:function(){var i=this,t=i.item,e=(new Date).getTime(),s=null;i.uid=e,t.wrap('<div class="spidochescaler-container" />'),s=t.parent(),i.scale_dom(t,s,s.width(),t.height())},scale_dom:function(i,t,e,s){var n=this.options;if(t.width()>n.maxWidth)return void i.removeAttr("style").parent().removeAttr("style");i.css({width:n.maxWidth});var r=1,o=1,a=1,h=1,d=1,l=i.width(),c=i.height();r=e/l,o=s/c,h=r,d=o,a=r>o?o:r,t.width()>n.minWidth&&(t.hasClass("spidochescaler-container")&&t.height(c*a),i.css({width:n.maxWidth,transformOrigin:"0 0",transform:"scale("+a+")"}))},resize:function(){var t=this,e=t.item,s=e.parent(),n=t.options.destroyAt;i(window).on("resize.domScaler."+t.uid,function(){i(window).width()>n&&t.is_init===!0?t.scale_dom(e,s,s.width(),e.height()):i(window).width()<=n&&t.is_init===!0?t.destroy():i(window).width()>n&&t.is_init===!1&&(t.load(),t.is_init=!0)})},load:function(){i(window).width()>this.options.destroyAt&&(this.init(),this.is_init=!0),this.resize()},destroy:function(){this.item.removeAttr("style"),this.item.parent().hasClass("spidochescaler-container")&&this.item.unwrap(),this.is_init=!1}},i.fn.spidochescaler=function(e){var s=Array.prototype.slice.call(arguments,1);return this.each(function(){var n=i(this),r=n.data("SpidocheScaler");r?"string"==typeof e&&r[e].apply(r,s):n.data("SpidocheScaler",new t(this,e))})}}(jQuery);